<!-- Sección principal centrada -->
<section class="brand-content-center">
  <!-- Contenedor del formulario -->
  <div class="w-[90%] md:w-[40%] p-5 bg-white border rounded shadow-sm">
    <!-- Título del formulario -->
    <div class="mb-4">
      <span class="text-xl font-semibold">Cambiar Contraseña</span>
    </div>

    <!-- Formulario reactivo de Angular -->
    <form
      [formGroup]="changePasswordForm"
      class="flex flex-col md:row gap-8 md:gap-10"
    >
      <!-- Campo de nueva contraseña -->
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Nueva contraseña</mat-label>
        <input
          matInput
          [type]="showPassword ? 'text' : 'password'"
          formControlName="newPassword"
          placeholder="Ingresa tu nueva contraseña"
        />
        <mat-icon matPrefix>lock</mat-icon>

        <!-- Botón para mostrar/ocultar la contraseña -->
        <button
          matSuffix
          mat-icon-button
          type="button"
          (click)="togglePasswordVisibility()"
        >
          <mat-icon>{{
            showPassword ? 'visibility' : 'visibility_off'
          }}</mat-icon>
        </button>

        <!-- Validaciones para nueva contraseña -->
        <mat-error
          *ngIf="changePasswordForm.get('newPassword')?.hasError('required')"
        >
          La nueva contraseña es requerida.
        </mat-error>
        <mat-error
          *ngIf="
            !changePasswordForm.get('newPassword')?.hasError('required') &&
            changePasswordForm.get('newPassword')?.hasError('passwordStrength')
          "
        >
          La contraseña debe tener 6 caracteres, con mayúscula, minúscula y un
          carácter especial.
        </mat-error>
      </mat-form-field>

      <!-- Campo de confirmación de contraseña -->
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Confirmar nueva contraseña</mat-label>
        <input
          matInput
          [type]="showConfirmPassword ? 'text' : 'password'"
          formControlName="confirmNewPassword"
          placeholder="Confirma tu nueva contraseña"
        />
        <mat-icon matPrefix>lock</mat-icon>

        <!-- Botón para mostrar/ocultar confirmación -->
        <button
          matSuffix
          mat-icon-button
          type="button"
          (click)="toggleConfirmPasswordVisibility()"
        >
          <mat-icon>{{
            showConfirmPassword ? 'visibility' : 'visibility_off'
          }}</mat-icon>
        </button>

        <!-- Validaciones para confirmación -->
        <mat-error
          *ngIf="
            changePasswordForm.get('confirmNewPassword')?.hasError('required')
          "
        >
          Es necesario confirmar tu nueva contraseña
        </mat-error>
        <mat-error *ngIf="changePasswordForm.hasError('passwordMismatch')">
          Las contraseñas no coinciden
        </mat-error>
      </mat-form-field>
    </form>

    <!-- Botón de guardar -->
    <div class="flex w-full justify-end items-center">
      <button
        mat-fab
        extended="true"
        (click)="onChangePassword()"
        color="primary"
        class="w-full"
      >
        Guardar nueva contraseña
      </button>
    </div>
  </div>
</section>
