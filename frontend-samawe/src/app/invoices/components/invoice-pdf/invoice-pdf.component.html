<!-- CONTENEDOR A IMPRIMIR -->
<article
  #pdfWrapper
  class="bg-white text-black p-6 w-full max-w-[800px] text-xs"
>
  <section class="flex content-between w-full items-center">
    <div class="flex items-center justify-center w-[25%]">
      <img
        src="../../../../assets/images/Logo Samawe.png"
        alt="Logo"
        class="w-[125px] h-[125px] rounded-full border border-solid border-black"
      />
    </div>
    <div class="flex flex-col w-[75%]">
      <div class="flex w-full content-between font-semibold">
        <div class="flex w-[50%] justify-start">
          <span>
            NIT:
            <span class="font-medium"> 9013501728 </span></span
          >
        </div>
        <div class="flex w-[50%] justify-start">
          <span>
            {{ invoiceData.invoiceType.name }} #:
            <span class="font-medium">{{ invoiceData.code }} </span></span
          >
        </div>
      </div>
      <div class="flex w-full content-between font-semibold">
        <div class="flex w-[50%] justify-start">
          <span
            >Generado por:
            <span class="font-medium"
              >{{ invoiceData.employee.firstName }}
              {{ invoiceData.employee.lastName }}</span
            ></span
          >
        </div>
        <div class="flex w-[50%] justify-start">
          <span>
            Dirección
            <span class="font-medium"> Vereda Pueblo Viejo - Aut 21</span></span
          >
        </div>
      </div>
      <div class="flex w-full content-between font-semibold">
        <div class="flex w-[50%] justify-start">
          <span
            >Cliente:
            <span class="font-medium"
              >{{ invoiceData.user.firstName }}
              {{ invoiceData.user.lastName }}</span
            ></span
          >
        </div>

        <div class="flex w-[50%] justify-start">
          <span>
            Fecha de impresión:
            <span class="font-medium">
              {{ printDate | date : 'dd/MM/yyyy HH:mm:ss' }}</span
            ></span
          >
        </div>
      </div>
    </div>
  </section>
  <div class="border border-[#06a606] w-full h-[1px] my-[3px]"></div>

  <table
    class="w-full border border-collapse my-[3px]"
    *ngIf="invoiceData?.invoiceDetails"
  >
    <thead>
      <tr>
        <th class="border text-sm p-1 pt-0 m-0 bg-[#06a606]">Nro°</th>
        <th class="border text-sm p-1 pt-0 m-0 bg-[#06a606]">Item</th>
        <th class="border text-sm p-1 pt-0 m-0 bg-[#06a606]">Und</th>
        <th class="border text-sm p-1 pt-0 m-0 bg-[#06a606]">Precio</th>
        <th class="border text-sm p-1 pt-0 m-0 bg-[#06a606]">Impuesto</th>
        <th class="border text-sm p-1 pt-0 m-0 bg-[#06a606]">Subtotal</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngIf="invoiceData.invoiceDetails.length === 0">
        <td colspan="6" class="border p-2 text-center text-xs">
          No hay productos registrados
        </td>
      </tr>
      <tr *ngFor="let detail of invoiceData.invoiceDetails; let i = index">
        <td class="border px-4 p-1 pt-0 m-0 text-left text-xs">{{ i + 1 }}</td>
        <td class="border px-4 p-1 pt-0 m-0 text-left text-xs">
          {{
            detail.product?.name ||
              detail.accommodation?.name ||
              detail.excursion?.name ||
              'N/A'
          }}
        </td>
        <td class="border px-4 p-1 pt-0 m-0 text-center text-xs">
          {{ detail.amount || 0 }}
        </td>
        <td class="border px-4 p-1 pt-0 m-0 text-right text-xs">
          {{ detail?.priceWithoutTax ?? 0 | formatCop }}
        </td>
        <td class="border px-4 p-1 pt-0 m-0 text-right text-xs">
          {{
            detail.product?.taxe ||
              detail.accommodation?.taxe ||
              detail.excursion?.taxe ||
              0 | formatCop
          }}
        </td>
        <td class="border px-4 p-1 pt-0 m-0 text-right text-xs">
          {{ detail?.subtotal ?? 0 | formatCop }}
        </td>
      </tr>
    </tbody>
  </table>

  <section class="flex flex-col h-full justify-center">
    <div class="border border-[#06a606] w-full h-[1px] my-[3px]"></div>

    @if (invoiceData.cash && invoiceData.cash > 0) {
    <div class="flex content-between">
      <div class="flex justify-start w-[50%]">
        <span class="font-bold">Efectivo:</span>
      </div>
      <div class="flex justify-end w-[50%]">
        <span class="text-[#06a606] font-medium">
          {{ invoiceData.cash || '' | formatCop }}
        </span>
      </div>
    </div>
    }

    <!-- TRANSFER -->
    @if (invoiceData.transfer && invoiceData.transfer > 0) {
    <div class="flex content-between">
      <div class="flex justify-start w-[50%]">
        <span class="font-bold">Transferencia:</span>
      </div>
      <div class="flex justify-end w-[50%]">
        <span class="text-[#06a606] font-medium">
          {{ invoiceData.transfer || '' | formatCop }}
        </span>
      </div>
    </div>
    }

    <div class="flex content-between">
      <div class="flex justify-start w-[50%]">
        <span class="font-bold">Estado de pago:</span>
      </div>
      <div class="flex justify-end w-[50%]">
        <span
          class="font-medium"
          [ngClass]="{
            'text-green-600':
              invoiceData.paidType?.name === 'Pagado' ||
              invoiceData.paidType?.name === 'PAGADO' ||
              invoiceData.paidType?.name === 'RESERVADO - PAGADO' ||
              invoiceData.paidType?.name === 'Reservado - Pagado',
            'text-red-600':
              invoiceData.paidType?.name === 'PENDIENTE' ||
              invoiceData.paidType?.name === 'Pendiente' ||
              invoiceData.paidType?.name === 'RESERVADO - PENDIENTE' ||
              invoiceData.paidType?.name === 'Reservado - Pendiente'
          }"
        >
          {{ invoiceData.paidType?.name || '' }}
        </span>
      </div>
    </div>

    <div class="flex content-between">
      <div class="flex justify-start w-[50%]">
        <span class="font-bold">Tipo de pago:</span>
      </div>
      <div class="flex justify-end w-[50%]">
        <span class="font-medium">{{ invoiceData.payType?.name || '' }}</span>
      </div>
    </div>

    <div class="flex content-between">
      <div class="flex justify-start w-[50%]">
        <span class="font-bold">Subtotal sin impuestos:</span>
      </div>
      <div class="flex justify-end w-[50%]">
        <span class="font-medium">{{
          invoiceData.subtotalWithoutTax ?? 0 | formatCop
        }}</span>
      </div>
    </div>

    <div class="flex content-between">
      <div class="flex justify-start w-[50%]">
        <span class="font-bold">Impuestos:</span>
      </div>
      <div class="flex justify-end w-[50%]">
        <span class="font-medium">{{
          invoiceData.totalTaxes ?? 0 | formatCop
        }}</span>
      </div>
    </div>

    <div class="flex content-between">
      <div class="flex justify-start w-[50%]">
        <span class="font-bold">Total:</span>
      </div>
      <div class="flex justify-end w-[50%]">
        <span class="font-medium text-[#06a606]">{{
          invoiceData.total ?? 0 | formatCop
        }}</span>
      </div>
    </div>
  </section>
  <section class="text-center text-[11px] italic">
    <span
      >"Gracias por su compañía - Factura generada por Samawe Putumayo S A S
      Zomac"</span
    >
  </section>
</article>
